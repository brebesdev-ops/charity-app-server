<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<script type="text/javascript">
	function register(){
		var user = {
			username: "kk",
			email: "kk@gmail.com",
			firstName: "Angel",
			lastName: "Kiboma",
			password: "password",
			phone: "0782491477",
			stripeCustomerId: "",
		}
		
		fetch("http://localhost:8080" + "/signup", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(user)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function login(){
		var user = {
			username: "kk",
			password: "password",
		}
		
		fetch("http://localhost:8080" + "/signin", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(user)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function updateUser(){
		var user = {
			id: "47",
			username: "aa",
			email: "aa@gmail.com",
			firstName: "Angel",
			lastName: "Kiboma",
			password: "password",
			phone: "0723897699",
			stripeCustomerId: "9939383838",
		}
		
		fetch("http://localhost:8080" + "/user/update", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(user)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
</script>
<script type="text/javascript">

	function saveCategory(){
		var category = {
			name: document.getElementById("category").value,
			description: "",
		}
		
		console.log(document.getElementById("category").value)
		
		fetch("http://localhost:8081" + "/category", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(category)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getCategoryByName(){
		
		fetch("http://localhost:8081" + "/category" + "/hunger", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCategories(){
		
		fetch("http://localhost:8081" + "/categories", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function saveCampaign(){
		var campaign = {
			campaignName: "Poodle & Pooch Rescue",
			description: "We specialize in the rescue, rehabilitation, socialization and re-homing of abandoned, neglected, abused, orphaned, and/or surrendered poodles.",
			country: "Tanzania",
			categoryId: "56",
			logo: "", //image name of uploaded image
			
		}
		
		fetch("http://localhost:8081" + "/campaign", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(campaign)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaigns(){
		
		fetch("http://localhost:8081" + "/campaigns", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaignsByCategory(){
		
		fetch("http://localhost:8081" + "/category/56/campaigns", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getCampaign(){
		
		fetch("http://localhost:8081" + "/campaign" + "/18", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function saveDonation(){
		var donation = {
			categoryId: "",
			campaignId: "",
			amount: "250",
			currency: "USD",
			notes: "",
			anonymous: false,
			userId: "23",
						
		}
		
		fetch("http://localhost:8081" + "/donations", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(donation)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonations(){
		
		fetch("http://localhost:8081" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByUserId(){
		
		fetch("http://localhost:8081" + "/user" + "/23" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByCategoryId(){
		
		fetch("http://localhost:8081" + "/category" + "/21" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByCampaignId(){
		
		fetch("http://localhost:8081" + "/campaign" + "/18" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function uploadCampaignImage(){
		
		console.log(document.getElementById("image").files[0])
		file = document.getElementById("image").files[0]
		fetch("http://localhost:8081" + "/campaign/67" + "/image" + true, {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			//body: file
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaignImages(){
		
		fetch("http://localhost:8081" + "/campaign" + "/18" + "/images", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			var div = document.getElementById("campaignImages")
			for(i=0; i<data.length; i++){
				var img = document.createElement("img");
				img.src = "data:image/jpg;base64," + data[i]
				div.appendChild(img)
			}
			console.log(data)
		}).catch ()
	}
</script>

	<button onclick="register()">Register</button>
	<button onclick="login()">Log In</button>
	<button onclick="updateUser()">Update User</button>
	<br/><br/>
	<input type="text" id="category" name="category" />
	<button onclick="saveCategory()">Save Category</button>
	<button onclick="getCategoryByName()">Get Category by name</button>
	<button onclick="getAllCategories()">Get All Categories</button>
	<br/><br/>
	<button onclick="saveCampaign()">Save Campaign</button>
	<button onclick="getAllCampaigns()">Get All Campaigns</button>
	<button onclick="getAllCampaignsByCategory()">Get All Campaigns by Category</button>
	<button onclick="getCampaign()">Get Campaign by ID</button>
	<br/><br/>
	<button onclick="saveDonation()">Save Donation</button>
	<button onclick="getAllDonations()">Get All Donations</button>
	<button onclick="getAllDonationsByUserId()">Get All Donations by User</button>
	<button onclick="getAllDonationsByCategoryId()">Get All Donations by Category</button>
	<button onclick="getAllDonationsByCampaignId()">Get All Donations by Campaign</button>
	<br/><br/>
	<form method="POST" action="http://localhost:8081/campaign/65/image/true" enctype="multipart/form-data">
		<input type="file" id="image" name="files"/>
	    <input type="submit" value="Upload" />
	</form>
	<button onclick="uploadCampaignImage()">Upload Campaign Image</button>
	<button onclick="getAllCampaignImages()">Get All Images by Campaign</button>
	<img src="http://localhost:8081/campaign/65/image/logo"/>
	<div id="campaignImages">All Campaign Images</div>
</body>


</html>