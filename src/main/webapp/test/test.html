<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<script type="text/javascript">
	function register(){
		var user = {
			username: "aa",
			email: "aa@gmail.com",
			firstName: "Angel",
			lastName: "Kiboma",
			password: "password",
			phone: "0723897699",
			stripeCustomerId: "",
		}
		
		fetch("http://localhost:8080" + "/signup", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(user)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function login(){
		var user = {
			username: "aa",
			password: "password",
		}
		
		fetch("http://localhost:8080" + "/signin", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(user)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function saveCategory(){
		var category = {
			name: "animals",
			description: "Save animals.",
		}
		
		fetch("http://localhost:8080" + "/category", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(category)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getCategoryByName(){
		
		fetch("http://localhost:8080" + "/category" + "/hunger", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCategories(){
		
		fetch("http://localhost:8080" + "/categories", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function saveCampaign(){
		var campaign = {
			campaignName: "AnimalShelter",
			description: "Shelter for stray animals.",
			country: "Tanzania",
			categoryId: "21",
			image: "", //image name of uploaded image
			
		}
		
		fetch("http://localhost:8080" + "/campaign", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(campaign)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaigns(){
		
		fetch("http://localhost:8080" + "/campaigns", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaignsByCategory(){
		
		fetch("http://localhost:8080" + "/category/21/campaigns", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getCampaign(){
		
		fetch("http://localhost:8080" + "/campaign" + "/18", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function saveDonation(){
		var donation = {
			categoryId: "",
			campaignId: "",
			amount: "250",
			currency: "USD",
			notes: "",
			anonymous: false,
			userId: "23",
						
		}
		
		fetch("http://localhost:8080" + "/donation", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			body: JSON.stringify(donation)
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonations(){
		
		fetch("http://localhost:8080" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByUserId(){
		
		fetch("http://localhost:8080" + "/user" + "/23" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByCategoryId(){
		
		fetch("http://localhost:8080" + "/category" + "/21" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllDonationsByCampaignId(){
		
		fetch("http://localhost:8080" + "/campaign" + "/18" + "/donations", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function uploadCampaignImage(){
		
		console.log(document.getElementById("image").files[0])
		file = document.getElementById("image").files[0]
		fetch("http://localhost:8080" + "/campaign/18" + "/image", {
			method: "POST",
			headers: {"Content-Type": "application/json"},
			//body: file
		}).then((response) => {
			return response.json()
		}).then((data) => {
			console.log(data)
		}).catch ()
	}
	
	function getAllCampaignImages(){
		
		fetch("http://localhost:8080" + "/campaign" + "/18" + "/images", {
			method: "GET",
			headers: {"Content-Type": "application/json"},
		}).then((response) => {
			return response.json()
		}).then((data) => {
			var div = document.getElementById("campaignImages")
			for(i=0; i<data.length; i++){
				var img = document.createElement("img");
				img.src = "data:image/jpg;base64," + data[i]
				div.appendChild(img)
			}
			console.log(data)
		}).catch ()
	}
</script>

	<button onclick="register()">Register</button>
	<button onclick="login()">Log In</button>
	<br/><br/>
	<button onclick="saveCategory()">Save Category</button>
	<button onclick="getCategoryByName()">Get Category by name</button>
	<button onclick="getAllCategories()">Get All Categories</button>
	<br/><br/>
	<button onclick="saveCampaign()">Save Campaign</button>
	<button onclick="getAllCampaigns()">Get All Campaigns</button>
	<button onclick="getAllCampaignsByCategory()">Get All Campaigns by Category</button>
	<button onclick="getCampaign()">Get Campaign by ID</button>
	<br/><br/>
	<button onclick="saveDonation()">Save Donation</button>
	<button onclick="getAllDonations()">Get All Donations</button>
	<button onclick="getAllDonationsByUserId()">Get All Donations by User</button>
	<button onclick="getAllDonationsByCategoryId()">Get All Donations by Category</button>
	<button onclick="getAllDonationsByCampaignId()">Get All Donations by Campaign</button>
	<br/><br/>
	<form method="POST" action="http://localhost:8080/campaign/18/image" enctype="multipart/form-data">
		<input type="file" id="image" name="files" multiple/>
	    <input type="submit" value="Upload" />
	</form>
	<button onclick="uploadCampaignImage()">Upload Campaign Image</button>
	<button onclick="getAllCampaignImages()">Get All Images by Campaign</button>
	<img src="http://localhost:8080/campaign/18/image/images.jpg"/>
	<div id="campaignImages">All Campaign Images</div>
</body>


</html>